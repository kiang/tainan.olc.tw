<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âª¢Ê£ÑÁâ©Ê£ÑÁΩÆÊ°à‰ª∂ÁÆ°ÁêÜÁ≥ªÁµ± - Waste Disposal Case Management System</title>
    <meta property="og:title" content="Âª¢Ê£ÑÁâ©Ê£ÑÁΩÆÊ°à‰ª∂ÁÆ°ÁêÜÁ≥ªÁµ± - Waste Disposal Case Management System" />
    <meta property="og:description" content="Áí∞‰øùÁΩ≤Âª¢Ê£ÑÁâ©Ê£ÑÁΩÆÊ°à‰ª∂Âú∞Âúñ" />
    <meta property="og:image" content="https://kiang.github.io/tainan.olc.tw/p/wdms/og_image.png" />

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Leaflet MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery UI -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/dark-hive/jquery-ui.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');

        body {
            padding: 0;
            margin: 0;
            overflow: hidden;
            font-family: 'Noto Sans TC', sans-serif;
            background: #f8f9fa;
        }

        html,
        body,
        #map {
            height: 100%;
        }

        .ui-front {
            z-index: 9999;
        }

        /* Floating controls */
        .floating-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 1000;
            background: white;
            border-radius: 20px;
            padding: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #ffcdd2;
        }

        .floating-search {
            position: absolute;
            top: 15px;
            left: 60px;
            z-index: 1000;
            background: white;
            border-radius: 25px;
            padding: 15px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 320px;
            border: 2px solid #ffcdd2;
        }

        .floating-search input {
            border-radius: 20px;
            border: 2px solid #ffcdd2;
            padding: 8px 15px;
            font-size: 14px;
        }

        .floating-search input:focus {
            border-color: #ef5350;
            box-shadow: 0 0 0 0.2rem rgba(239, 83, 80, 0.25);
        }

        .info-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 350px;
            border: 2px solid #ffcdd2;
        }

        .info-panel h6 {
            color: #2d3436;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .info-panel ul {
            margin: 0;
            padding-left: 20px;
            font-size: 14px;
        }

        .info-panel li {
            margin: 5px 0;
            color: #636e72;
        }

        .info-panel small {
            color: #ef5350;
        }

        .info-panel a {
            color: #ef5350;
            text-decoration: none;
            font-weight: 500;
        }

        .info-panel a:hover {
            color: #c62828;
            text-decoration: underline;
        }

        /* Button styles */
        #btn-geolocation {
            background-color: #ef5350;
            border: none;
            border-radius: 20px;
            padding: 8px 20px;
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        #btn-geolocation:hover {
            background-color: #c62828;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Leaflet popup styling */
        .leaflet-popup-content-wrapper {
            border-radius: 20px;
            padding: 5px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .leaflet-popup-content {
            margin: 13px 19px;
            font-family: 'Noto Sans TC', sans-serif;
        }

        .leaflet-popup-content h4 {
            color: #2d3436;
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 18px;
            border-bottom: 2px solid #ffcdd2;
            padding-bottom: 8px;
        }

        .leaflet-popup-content table {
            font-size: 14px;
        }

        .leaflet-popup-content td {
            padding: 8px 4px;
            border-bottom: 1px solid #f5f5f5;
        }

        .leaflet-popup-content td strong {
            color: #636e72;
            font-weight: 500;
        }

        /* Button styles in popups */
        .leaflet-popup-content .btn {
            color: white !important;
            text-decoration: none;
            border-radius: 20px;
            padding: 8px 20px;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
        }

        .leaflet-popup-content .btn-primary {
            background-color: #ef5350;
        }

        .leaflet-popup-content .btn-primary:hover {
            background-color: #c62828;
            transform: translateY(-1px);
        }

        /* Map tile filter for softer appearance */
        .leaflet-tile-pane {
            filter: brightness(1.05) saturate(0.9);
        }

        .garbage-icon-marker {
            background: none;
            border: none;
            text-align: center;
        }

        .garbage-icon-marker i {
            color: #dc3545;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.4));
        }

        .user-location-marker {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .loading {
            position: absolute;
            top: 15px;
            right: 15px;
            background: white;
            padding: 12px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 1000;
            border: 2px solid #ffcdd2;
            font-weight: 500;
            color: #636e72;
        }
    </style>
</head>
<body>
    <div id="loading" class="loading">ËºâÂÖ•Ë≥áÊñô‰∏≠...</div>
    <div id="map"></div>

    <!-- Search control -->
    <div class="floating-search">
        <input type="text" id="findPoint" name="findPoint" class="form-control" placeholder="ÊêúÂ∞ãÊ°à‰ª∂Âú∞ÈªûÊàñË≥áË®ä">
    </div>

    <!-- Floating controls -->
    <div class="floating-controls">
        <button class="btn btn-primary btn-sm" id="btn-geolocation" title="ÂÆö‰ΩçÁõÆÂâç‰ΩçÁΩÆ">
            <i class="fa fa-location-arrow"></i> ÊàëÁöÑ‰ΩçÁΩÆ
        </button>
    </div>

    <!-- Info panel -->
    <div class="info-panel">
        <h6>üóëÔ∏è Âª¢Ê£ÑÁâ©Ê£ÑÁΩÆÊ°à‰ª∂Âú∞Âúñ</h6>
        <p style="margin: 10px 0 5px 0; font-size: 14px; color: #636e72;">
            È°ØÁ§∫Áí∞‰øùÁΩ≤Âª¢Ê£ÑÁâ©Ê£ÑÁΩÆÊ°à‰ª∂‰ΩçÁΩÆÔºåÈªûÊìäÊ®ôË®òÊü•ÁúãË©≥Á¥∞Ë≥áË®ä
        </p>
        <small>
            <a href="https://wdms.moenv.gov.tw/idms/" target="_blank">Ë≥áÊñô‰æÜÊ∫ê</a> |
            <a href="https://github.com/kiang/tainan.olc.tw/issues" target="_blank">ÂïèÈ°åÂõûÂ†±</a> |
            <a href="https://facebook.com/k.olc.tw/" target="_blank">Ê±üÊòéÂÆó</a>
        </small>
    </div>

    <!-- jQuery -->
    <script src="../js/jquery.min.js"></script>

    <!-- jQuery UI -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Routie -->
    <script src="../js/routie.min.js"></script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Leaflet MarkerCluster JS -->
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

    <!-- PapaParse for CSV parsing -->
    <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>

    <!-- Main JS -->
    <script src="js/main.js"></script>
</body>
</html>
