import{_ as C,o as M,c as l,b as t,h as m,k as B,i as L,T as H,f as n,l as g,g as i,t as r,e as h,F as j,r as F,n as S,q as T}from"./index.CMu5pGLJ.js";import{_ as N}from"./LeafletMap.gh6rChTe.js";const U={class:"street-talk-page"},A={class:"map-wrapper"},$={key:0,class:"video-panel"},I={class:"panel-header"},J={class:"location-info"},P={key:0,class:"video-container"},q=["src"],D={class:"video-nav"},E=["disabled"],K={class:"video-counter"},W=["disabled"],G={class:"video-list"},O={class:"list-items"},Q=["onClick"],R={class:"item-number"},X={class:"item-info"},Y={class:"item-title"},Z={key:0,class:"item-play"},tt="https://tainan.olc.tw/json/youtube.json",et="https://tainan.olc.tw/json/67000-08.json",at={__name:"StreetTalk",setup(st){const{width:_}=T(),f=g(()=>_.value<=576?13:15),b=[23.004582,120.198],d=n({}),c=n(!1),u=n(""),s=n([]),a=n(0),p=g(()=>s.value.length>0&&a.value<s.value.length?s.value[a.value]:null);M(async()=>{try{const o=await fetch("https://tainan.olc.tw/json/youtube_list.json");d.value=await o.json()}catch(o){console.error("Failed to load video list:",o)}});function z(o){const e=o.properties.key;d.value[e]&&(u.value=e,s.value=d.value[e],a.value=0,c.value=!0)}function y(){c.value=!1,u.value="",s.value=[],a.value=0}function V(o){a.value=o}function k(){a.value>0&&a.value--}function x(){a.value<s.value.length-1&&a.value++}return(o,e)=>(i(),l("main",U,[t("div",A,[m(N,{center:b,zoom:f.value,geoJsonUrl:tt,boundaryUrl:et,mapType:"points",onFeatureClick:z},null,8,["zoom"]),e[0]||(e[0]=B('<div class="map-info" data-v-aeb08768><div class="info-icon" data-v-aeb08768><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" data-v-aeb08768><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" data-v-aeb08768></path><path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" data-v-aeb08768></path></svg></div><p data-v-aeb08768>點擊地點觀看街講影片</p></div>',1))]),m(H,{name:"slide"},{default:L(()=>[c.value?(i(),l("div",$,[t("div",I,[t("div",J,[e[1]||(e[1]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[t("path",{d:"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"})],-1)),t("span",null,r(u.value),1)]),t("button",{class:"close-btn",onClick:y,"aria-label":"關閉"},[...e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"},[t("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1)])])]),p.value?(i(),l("div",P,[t("iframe",{src:`https://www.youtube.com/embed/${p.value.id}?autoplay=1`,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,q)])):h("",!0),t("div",D,[t("button",{class:"nav-btn",onClick:k,disabled:a.value===0,"aria-label":"上一部"},[...e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"},[t("path",{d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"})],-1)])],8,E),t("div",K,r(a.value+1)+" / "+r(s.value.length),1),t("button",{class:"nav-btn",onClick:x,disabled:a.value===s.value.length-1,"aria-label":"下一部"},[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"},[t("path",{d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"})],-1)])],8,W)]),t("div",G,[e[6]||(e[6]=t("div",{class:"list-header"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[t("path",{d:"M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0v6h8V1H4zm8 8H4v6h8V9zM1 1v2h2V1H1zm2 3H1v2h2V4zM1 7v2h2V7H1zm2 3H1v2h2v-2zm-2 3v2h2v-2H1zM15 1h-2v2h2V1zm-2 3v2h2V4h-2zm2 3h-2v2h2V7zm-2 3v2h2v-2h-2zm2 3h-2v2h2v-2z"})]),t("span",null,"影片清單")],-1)),t("div",O,[(i(!0),l(j,null,F(s.value,(w,v)=>(i(),l("button",{key:w.id,class:S(["video-item",{active:v===a.value}]),onClick:ot=>V(v)},[t("div",R,r(v+1),1),t("div",X,[t("div",Y,r(w.title),1)]),v===a.value?(i(),l("div",Z,[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[t("path",{d:"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"})],-1)])])):h("",!0)],10,Q))),128))])])])):h("",!0)]),_:1})]))}},nt=C(at,[["__scopeId","data-v-aeb08768"]]);export{nt as default};
